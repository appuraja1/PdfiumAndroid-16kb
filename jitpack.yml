jdk:
  - openjdk17
env:
  ANDROID_HOME: /opt/android-sdk-linux
  ANDROID_SDK_ROOT: /opt/android-sdk-linux
before_install: |
  set -e
  SDK="$ANDROID_HOME"
  if [ ! -x "$SDK/cmdline-tools/latest/bin/sdkmanager" ]; then
    mkdir -p "$SDK/cmdline-tools"
    wget -q https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip -O /tmp/cmdtools.zip
    unzip -q /tmp/cmdtools.zip -d "$SDK/cmdline-tools"
    mv "$SDK/cmdline-tools/cmdline-tools" "$SDK/cmdline-tools/latest"
  fi
  yes | "$SDK/cmdline-tools/latest/bin/sdkmanager" --licenses || true
  "$SDK/cmdline-tools/latest/bin/sdkmanager" --update
  "$SDK/cmdline-tools/latest/bin/sdkmanager" "platform-tools" "platforms;android-36" "build-tools;36.0.0" "ndk;29.0.13113456"
  yes | "$SDK/cmdline-tools/latest/bin/sdkmanager" --licenses
install:
  - ./gradlew publishReleasePublicationToMavenLocal
